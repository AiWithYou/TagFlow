# 画像タグ付け・ファイル移動ツール

AIモデルを使用して画像にタグ付けし、タグに基づいて画像ファイルを管理するためのツールです。

## 主な機能

### 画像タグ付け機能
- Ollamaを利用したAIによる画像分析
- 画像ファイルのドラッグ＆ドロップ対応
- 画像のサムネイルプレビュー表示
- 分析結果のタグ表示

### ファイル移動機能
- タグに基づく画像検索（AND/OR条件対応）
- 正規表現によるキーワード検索
- 検索結果のプレビュー表示
- 選択した画像のコピー/移動機能

## 動作環境
- Python 3.8以上
- PySide6
- Pillow (PIL)
- Ollama（ローカルで実行）

## インストール方法

```bash
# 必要なパッケージのインストール
pip install PySide6 Pillow requests
```

## 使用方法

### アプリケーションの起動
```bash
python main_new.py
```

### 画像タグ付け
1. 「画像タグ付け」タブを選択
2. 画像ファイルをウィンドウにドラッグ＆ドロップするか、「フォルダ追加」または「ファイル追加」ボタンで追加
3. Ollamaモデルと言語を選択（デフォルトは「gemma3:27b」）
4. 必要に応じて「詳細設定」ボタンからカスタムプロンプトや詳細度を設定
5. 「分析実行」ボタンをクリックして処理を開始
6. 分析結果は画像と同じフォルダに.txtファイルとして保存されます

### ファイル移動
1. 「ファイル移動」タブを選択
2. 「ソースフォルダ」と「宛先フォルダ」を選択
3. 検索キーワードを入力（カンマ区切りで複数指定可能）
4. 検索モード（AND/OR）と正規表現オプションを設定
5. 「検索」ボタンをクリックして検索を実行
6. 検索結果から対象の画像を選択
7. 「コピー」または「移動」ボタンをクリックして処理を実行

## カスタマイズ

### Ollama URL
デフォルトでは「http://localhost:11434/api/generate」を使用しますが、ツールバーのURL入力欄で変更可能です。

### モデル選択
デフォルトでは「gemma3:27b」を使用しますが、ドロップダウンメニューから選択するか、直接入力で変更可能です。

### カスタムプロンプト
「詳細設定」ボタンからカスタムプロンプトを設定できます。空白の場合はデフォルトプロンプトが使用されます。

## 注意事項
- Ollamaが事前にインストールされている必要があります
- 大量の画像を処理する場合は、処理時間がかかる場合があります
- 画像分析の精度はOllamaのモデルに依存します

## exe化について
PyInstallerを使用してexe化する場合は以下のコマンドを実行します：

```bash
pip install pyinstaller
pyinstaller --onefile --windowed --icon=app_icon.ico main_new.py
```

## ライセンス
このソフトウェアは商用利用可能です。
